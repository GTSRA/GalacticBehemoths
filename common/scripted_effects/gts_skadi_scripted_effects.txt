skadi_hire_leader = {
	event_target:ethic_leader = {
		set_owner = root
		set_leader_flag = gts_skadi
		#set_leader_flag = legendary_leader #renowed为名声在外
		#set_leader_flag = hired_admiral_merc_leader领袖不计入上限
		set_leader_flag = should_not_have_upkeep		#没有维护费
		add_skill_without_trait_selection = 10
		save_global_event_target_as = gts_skadi		#全球事件都能用
		gts_ui_leader_init = yes
	}
	create_message = {
		#弹信息
		type = MESSAGE_RECRUITED_LEADER
		localization = MESSAGE_RECRUITED_LEADER_DESC
		days = @toast_message_days
		target = event_target:gts_skadi
		variable = {
			type = name
			localization = LEADER
			scope = event_target:gts_skadi
		}
		variable = {
			key = "border"
			value = "GFX_border_legendary"
		}
	}
}

#拒绝伊莎玛拉随便弹个事件
isharmla_dislike_event = {
	event_target:skadi_country = {
		random_list = {
			20 = {
				country_event = {
					id = gts_skadi_shroud.0002
				}
			}
			20 = {
				country_event = {
					id = gts_skadi_shroud.0003
				}
			}
			10 = {
				country_event = {
					id = gts_skadi_shroud.0004
				}
			}
			20 = {
				country_event = {
					id = gts_skadi_shroud.0005
				}
			}
			20 = {
				country_event = {
					id = gts_skadi_shroud.0006
				}
			}
		}
	}
}

#斯卡蒂给灵能的时候弹消息
create_skadi_give_massage = {
	create_message = {
		type = MESSAGE_skadi_give_psionic
		localization = $localization$
		days = 30
		target = this
		variable = {
			type = name
			localization = LEADER
			scope = this
		}
		variable = {
			type = name
			localization = LEADER_TRAITS
			scope = this
		}
	}
}

#卡池抽干了随机一个事件
skadi_traits_random_event = {
	random_list = {
		1 = {
			country_event = {
				id = gts_skadi_traits.00
			}
		}
		1 = {
			country_event = {
				id = gts_skadi_traits.99
			}
		}
	}
}

#爱液星球改造
pc_gts_juice_change = {
	set_planet_flag = gts_reformed_planet
	change_pc = pc_gts_juice
	set_colony_type = col_gts_juice
	validate_planet_buildings_and_districts = yes

	add_modifier = {
		modifier = gts_juice_colony_1
		days = -1
	}
	add_modifier = {
		modifier = gts_juice_colony_2
		days = -1
	}
	add_modifier = {
		modifier = gts_juice_colony_3
		days = -1
	}
	add_modifier = {
		modifier = atmospheric_aphrodisiac
		days = -1
	}

	hidden_effect = {
		if = {
			limit = {
				root.owner = {
					not = {
						has_technology = tech_gts_bfbf_habitability_juiceandsemen
					}
				}
			}
			add_deposit = d_juice_ruin1
			add_deposit = d_juice_ruin2
			add_deposit = d_juice_ruin4
			add_deposit = d_juice_ruin5
			add_deposit = d_juice_ruin6
		}
		export_trigger_value_to_variable = {
			trigger = planet_size
			variable = gts_bruh_get_planet_size
		}
		set_variable_to_random_value = {
			which = gts_bruh_random_count
			min = 9
			max = gts_bruh_get_planet_size
		}
		while = {
			count = gts_bruh_random_count
			random_list = {
				1 = {
					add_deposit = d_juice_ruin4
				}
				1 = {
					add_deposit = d_juice_ruin5
				}
				1 = {
					add_deposit = d_juice_ruin6
				}
			}
		}
		add_deposit = d_juice_ruin1
		add_deposit = d_juice_ruin2
		add_deposit = d_juice_ruin3
		remove_building = building_colony_shelter
		remove_building = building_deployment_post

		remove_building = building_capital
		remove_building = building_hive_capital
		remove_building = building_machine_capital
		remove_building = building_resort_capital
		remove_building = building_slave_capital
		remove_building = building_ancient_control_center
		remove_building = building_ancient_palace
		remove_building = building_capital_wilderness

		remove_building = building_major_capital
		remove_building = building_hive_major_capital
		remove_building = building_machine_major_capital
		remove_building = building_resort_major_capital
		remove_building = building_slave_major_capital
		remove_building = building_major_capital_wilderness

		remove_building = building_system_capital
		remove_building = building_machine_system_capital
		remove_building = building_system_capital_wilderness
		add_building = building_gts_bruh_juice_colony_shelter
	}
}

# 乳汁星球改造
pc_gts_milk_change = {
	set_planet_flag = gts_reformed_planet
	change_pc = pc_gts_milk
	set_colony_type = col_gts_milk
	validate_planet_buildings_and_districts = yes

	add_modifier = {
		modifier = gts_milk_colony_1
		days = -1
	}
	add_modifier = {
		modifier = gts_milk_colony_2
		days = -1
	}
	add_modifier = {
		modifier = gts_milk_colony_3
		days = -1
	}
	add_modifier = {
		modifier = lush_planet
		days = -1
	}

	hidden_effect = {
		export_trigger_value_to_variable = {
			trigger = planet_size
			variable = gts_bruh_get_planet_size
		}
		set_variable_to_random_value = {
			which = gts_bruh_random_count
			min = 9
			max = gts_bruh_get_planet_size
		}
		while = {
			count = gts_bruh_random_count
			random_list = {
				1 = {
					add_deposit = d_milk_ruin1
				}
				1 = {
					add_deposit = d_milk_ruin2
				}
				1 = {
					add_deposit = d_milk_ruin3
				}
			}
		}
		add_deposit = d_gts_milk_sea
		remove_building = building_colony_shelter
		remove_building = building_deployment_post

		remove_building = building_capital
		remove_building = building_hive_capital
		remove_building = building_machine_capital
		remove_building = building_resort_capital
		remove_building = building_slave_capital
		remove_building = building_ancient_control_center
		remove_building = building_ancient_palace
		remove_building = building_capital_wilderness

		remove_building = building_major_capital
		remove_building = building_hive_major_capital
		remove_building = building_machine_major_capital
		remove_building = building_resort_major_capital
		remove_building = building_slave_major_capital
		remove_building = building_major_capital_wilderness

		remove_building = building_system_capital
		remove_building = building_machine_system_capital
		remove_building = building_system_capital_wilderness
		add_building = building_gts_bruh_milk_colony_shelter
	}
}

# 精液星球改造
pc_gts_semen_change = {
	set_planet_flag = gts_reformed_planet
	change_pc = pc_gts_semen
	set_colony_type = col_gts_semen
	validate_planet_buildings_and_districts = yes
	add_modifier = {
		modifier = gts_semen_colony_1
		days = -1
	}
	add_modifier = {
		modifier = gts_semen_colony_2
		days = -1
	}
	add_modifier = {
		modifier = gts_semen_colony_3
		days = -1
	}
	add_modifier = {
		modifier = atmospheric_aphrodisiac
		days = -1
	}
	hidden_effect = {
		remove_building = building_colony_shelter
		remove_building = building_deployment_post

		remove_building = building_capital
		remove_building = building_hive_capital
		remove_building = building_machine_capital
		remove_building = building_resort_capital
		remove_building = building_slave_capital
		remove_building = building_ancient_control_center
		remove_building = building_ancient_palace
		remove_building = building_capital_wilderness

		remove_building = building_major_capital
		remove_building = building_hive_major_capital
		remove_building = building_machine_major_capital
		remove_building = building_resort_major_capital
		remove_building = building_slave_major_capital
		remove_building = building_major_capital_wilderness

		remove_building = building_system_capital
		remove_building = building_machine_system_capital
		remove_building = building_system_capital_wilderness
		add_building = building_gts_bruh_semen_colony_shelter
	}
}

# 排泄星球改造
pc_gts_shit_change = {
	set_planet_flag = gts_reformed_planet
	change_pc = pc_gts_shit
	set_colony_type = col_gts_shit
	validate_planet_buildings_and_districts = yes

	add_modifier = {
		modifier = gts_shit_colony_1
		days = -1
	}
	add_modifier = {
		modifier = gts_shit_colony_2
		days = -1
	}
	add_modifier = {
		modifier = gts_shit_colony_3
		days = -1
	}
	add_modifier = {
		modifier = ammonia_biosphere
		days = -1
	}

	hidden_effect = {
		export_trigger_value_to_variable = {
			trigger = planet_size
			variable = gts_bruh_get_planet_size
		}
		set_variable_to_random_value = {
			which = gts_bruh_random_count
			min = 9
			max = gts_bruh_get_planet_size
		}
		while = {
			count = gts_bruh_random_count
			random_list = {
				1 = {
					add_deposit = d_shit_ruin2
				}
				1 = {
					add_deposit = d_shit_ruin3
				}
				1 = {
					add_deposit = d_shit_ruin4
				}
				1 = {
					add_deposit = d_shit_ruin5
				}
				1 = {
					add_deposit = d_shit_ruin6
				}
				1 = {
					add_deposit = d_shit_ruin7
				}
			}
		}
		add_deposit = d_shit_ruin1
		remove_building = building_colony_shelter
		remove_building = building_deployment_post

		remove_building = building_capital
		remove_building = building_hive_capital
		remove_building = building_machine_capital
		remove_building = building_resort_capital
		remove_building = building_slave_capital
		remove_building = building_ancient_control_center
		remove_building = building_ancient_palace
		remove_building = building_capital_wilderness

		remove_building = building_major_capital
		remove_building = building_hive_major_capital
		remove_building = building_machine_major_capital
		remove_building = building_resort_major_capital
		remove_building = building_slave_major_capital
		remove_building = building_major_capital_wilderness

		remove_building = building_system_capital
		remove_building = building_machine_system_capital
		remove_building = building_system_capital_wilderness
		add_building = building_gts_bruh_shit_colony_shelter
	}
}

# 足垢星球改造(初级)
pc_gts_dirt_change = {
	set_planet_flag = gts_reformed_planet
	change_pc = pc_gts_dirt0
	set_colony_type = col_gts_dirt
	validate_planet_buildings_and_districts = yes

	hidden_effect = {
		if = {
			limit = {
				owner = {
					has_technology = tech_gts_bfbf_habitability_dirt
				}
			}
			export_trigger_value_to_variable = {
				trigger = planet_size
				variable = gts_bruh_get_planet_size
			}
			set_variable_to_random_value = {
				which = gts_bruh_random_count
				min = 9
				max = gts_bruh_get_planet_size
			}
			while = {
				count = gts_bruh_random_count
				random_list = {
					1 = {
						add_deposit = d_dirt_clean1
					}
					1 = {
						add_deposit = d_dirt_clean2
					}
					1 = {
						add_deposit = d_dirt_clean3
					}
				}
			}
		}
		else = {
			export_trigger_value_to_variable = {
				trigger = planet_size
				variable = gts_bruh_get_planet_size
			}
			set_variable_to_random_value = {
				which = gts_bruh_random_count
				min = 9
				max = gts_bruh_get_planet_size
			}
			while = {
				count = gts_bruh_random_count
				random_list = {
					1 = {
						add_deposit = d_dirt_ruin1
					}
					1 = {
						add_deposit = d_dirt_ruin3
					}
					1 = {
						add_deposit = d_dirt_ruin4
					}
					1 = {
						add_deposit = d_dirt_ruin5
					}
				}
			}
		}
		add_deposit = d_dirt_ruin2
		remove_building = building_colony_shelter
		remove_building = building_deployment_post

		remove_building = building_capital
		remove_building = building_hive_capital
		remove_building = building_machine_capital
		remove_building = building_resort_capital
		remove_building = building_slave_capital
		remove_building = building_ancient_control_center
		remove_building = building_ancient_palace
		remove_building = building_capital_wilderness

		remove_building = building_major_capital
		remove_building = building_hive_major_capital
		remove_building = building_machine_major_capital
		remove_building = building_resort_major_capital
		remove_building = building_slave_major_capital
		remove_building = building_major_capital_wilderness

		remove_building = building_system_capital
		remove_building = building_machine_system_capital
		remove_building = building_system_capital_wilderness
		add_building = building_gts_bruh_dirt_colony_shelter
	}
}

#创建希诺舰队
create_xinuo_fleet = {
    event_target:gts_xinuo = {
        hidden_effect = {
            remove_gts_leader_size_trait = yes
        }
        add_trait = {
            trait = leader_trait_Ultra
            show_message = yes
        }
        add_trait = {
            trait = xinuo_leader_trait_greedy
            show_message = yes
        }
    }
    create_fleet = {
        name = "NAME_xinuo_leader"
        effect = {
            create_ship = {
                name = "NAME_xinuo_leader"
                design = "NAME_xinuo_leader"
                effect = {
                    set_ship_flag = gts_xinuo_ship
                    save_global_event_target_as = gts_xinuo_ship
                    set_disabled = no
                }
            }
            set_owner = root
            save_global_event_target_as = gts_xinuo_fleet
            set_location = {
                target = Root.capital_scope
                distance = 10
                angle = 90
                direction = in_system
            }
            set_fleet_stance = passive
            set_aggro_range_measure_from = self
            set_aggro_range = 350
            assign_leader = event_target:gts_xinuo
        }
        settings = {
            spawn_debris = yes
            is_boss = no
            can_change_leader = no
            uses_naval_capacity = no
            can_upgrade = no
            can_disband = no
            can_change_composition = no
        }
    }
}

#删除希诺舰队
delete_xinuo_fleet = {
    event_target:gts_xinuo = {
        hidden_effect = {
            unassign_leader = this
            remove_gts_leader_size_trait = yes
        }
        add_trait = {
            trait = leader_trait_Normal
            show_message = yes
        }
        add_trait = {
            trait = xinuo_leader_trait_feather
            show_message = yes
        }
    }
    event_target:gts_xinuo_ship = {
        delete_ship = this
    }
}

