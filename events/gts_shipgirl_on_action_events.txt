namespace = gts_action
# Planet is turned into tomb world by special bombing stance
planet_event = {
    id = gts_action.81
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        OR = {
            has_orbital_bombardment_stance = gts_shipgirl_armageddon
        }
        from = {
            OR = {
                is_country_type = default
                is_country_type = fallen_empire
                is_country_type = awakened_fallen_empire
            }
        }
        habitable_planet = yes
    }

    immediate = {
        owner = {
            if = {
                limit = {
                    owner = {
                        is_at_war_with = from
                    }
                }
                add_static_war_exhaustion = {
                    attacker = from
                    location = root
                    value_for_planet_destruction = 0.5
                }
            }
            if = {
                limit = {
                    NAND = {
                        has_origin = origin_progenitor_hive
                        root = { is_capital = yes }
                    }
                }
                country_event = { id = action.82 }
            }
            else = {
                country_event = { id = origin.3265 }
            }
        }
        from = { country_event = { id = gts_action.83 } }
        random_list = {
            30 = { change_pc = pc_nuked }
            30 = { change_pc = pc_shattered }
            30 = { change_pc = pc_broken }
            10 = { change_pc = pc_gts_juice }
            10 = { change_pc = pc_gts_juice2 }
            10 = { change_pc = pc_gts_milk }
            10 = { change_pc = pc_gts_semen }
            10 = { change_pc = pc_gts_shit }
            10 = { change_pc = pc_gts_dirt0 }
            10 = { change_pc = pc_gts_dirt1 }
            10 = { change_pc = pc_gts_dirt2 }
            10 = { change_pc = pc_gts_dirt3 }
            10 = { change_pc = pc_gts_dirt4 }
            10 = { change_pc = pc_gts_urine }
        }

        set_planet_flag = nuked_planet_anomalies_disabled
        remove_all_buildings = yes
        reroll_deposits = yes
        tomb_world_modifier_cleanup = yes
        set_planet_flag = armageddon_nuked
    }
}

planet_event = {
    id = gts_action.61
    hide_window = yes
    is_triggered_only = yes
    trigger = {
        OR = {
            has_orbital_bombardment_stance = gts_115tiny_armageddon
        }
        from = {
            OR = {
                is_country_type = default
                is_country_type = fallen_empire
                is_country_type = awakened_fallen_empire
            }
        }
        habitable_planet = yes
    }

    immediate = {
        owner = {
            if = {
                limit = {
                    owner = {
                        is_at_war_with = from
                    }
                }
                add_static_war_exhaustion = {
                    attacker = from
                    location = root
                    value_for_planet_destruction = 0.5
                }
            }
            if = {
                limit = {
                    NAND = {
                        has_origin = origin_progenitor_hive
                        root = { is_capital = yes }
                    }
                }
                country_event = { id = action.82 }
            }
            else = {
                country_event = { id = origin.3265 }
            }
        }
        from = { country_event = { id = gts_action.84 } }
        change_pc = pc_nuked
        set_planet_flag = nuked_planet_anomalies_disabled
        remove_all_buildings = yes
        reroll_deposits = yes
        tomb_world_modifier_cleanup = yes
        set_planet_flag = armageddon_nuked
    }
}

# Planet is turned into tomb world by Armageddon bombing stance (bombarder)
country_event = {
    id = gts_action.83
    title = "action.82.name"
    picture = GFX_load_111
    desc = gts_action.83.desc
    show_sound = event_super_explosion
    location = from

    is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                has_ascension_perk = ap_become_the_crisis
            }
            complete_crisis_objective = crisobj_destroy_worlds
        }
        else_if = {
            limit = {
                has_ascension_perk = ap_gts_115tiny_crisis
            }
            complete_crisis_objective = gts_115tiny_crisobj_destroy_worlds
        }
    }

    option = {
        name = EXCELLENT
        custom_tooltip = gts_bombed_to_tomb_world
    }
}
# Planet is turned into tomb world by Armageddon bombing stance (bombarder)
country_event = {
    id = gts_action.84
    title = "action.82.name"
    picture = GFX_evt_nuclear_explosion
    desc = action.83.desc
    show_sound = event_super_explosion
    location = from

    is_triggered_only = yes

    immediate = {
        if = {
            limit = {
                has_ascension_perk = ap_gts_115tiny_crisis
            }
            complete_crisis_objective = gts_115tiny_crisobj_destroy_worlds
        }
    }

    option = {
        name = EXCELLENT
        custom_tooltip = bombed_to_tomb_world
    }
}
