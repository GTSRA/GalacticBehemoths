namespace = aom_leader

#英灵召唤
country_event = {
	id = aom_leader.1
	title = "aom_leader.1.name"
	desc = "aom_leader.1.desc"
	
	is_triggered_only = yes
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_country.ruler
		room = "ethic_spaceship_room"
	}

	immediate = {
		random_country = {
			limit = {		
				is_ai = no
				OR = {
					has_origin = origin_panlon
				}		
			}
		}
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = "aom_leader.1.a"
		allow = {
            custom_tooltip = {
				resource_stockpile_compare = { resource = sr_aom_unregistered_spirit_origin value >= 10 }
			}
			NOT = { has_country_flag = Miyu_flag_max }
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = -10
        }
		custom_tooltip = aom_leader.1.a.tooltip
		hidden_effect = {
            country_event = { id = aom_leader.2 }
        }
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = "aom_leader.1.b"
		allow = {
            custom_tooltip = {
				resource_stockpile_compare = { resource = sr_aom_unregistered_spirit_origin value >= 10 }
			}
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = -10
        }
		custom_tooltip = aom_leader.1.b.tooltip
		hidden_effect = {
            country_event = { id = aom_leader.3 }
        }
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = "aom_leader.1.c"
		allow = {
            custom_tooltip = {
				resource_stockpile_compare = { resource = sr_aom_unregistered_spirit_origin value >= 10 }
			}
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = -10
        }
		custom_tooltip = aom_leader.1.c.tooltip
		hidden_effect = {
            country_event = { id = aom_leader.4 }
        }
	}
}

#美游招募事件
country_event = {
	id = aom_leader.2
	title = aom_leader.2.name
	desc = aom_leader.2.desc
	show_sound = event_celebration
	is_triggered_only = yes
	fire_only_once = yes
	picture = Miyu
	event_window_type = leader_recruit
	immediate = {
		set_country_flag = Miyu
		legendary_gts_leader_creator = {
			LEADER_PORTRAIT = Miyu
			CLASS = commander
			NAME = NAME_Miyu
			LEVEL = 8
			AGE = 11
			GENDER = female		
			ETHIC = xenophile
			DESC = Miyu_desc
			CATCH_PHRASE = Miyu_catch_phrase
			RANDOMIZE_TRAITS = no
			TARGET = Miyu
		}
		last_created_leader = {
			add_trait = {
				trait = leader_trait_servant1
			}
			set_leader_flag = leader_Miyu_flag
			save_global_event_target_as = Miyu
		}
	}	
	picture_event_data = {
		portrait = event_target:Miyu
		room = ethic_spaceship_room
	}
	option = {
		name = DISMISS
		tag = dismiss_leader
	}
	option = {
		name = aom_leader.2.a
		response_text = aom_leader.2.a.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.b
		response_text = aom_leader.2.b.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.c
		response_text = aom_leader.2.c.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.d
		response_text = aom_leader.2.d.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.e
		response_text = aom_leader.2.e.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.f
		response_text = aom_leader.2.f.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.g
		response_text = aom_leader.2.g.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.2.h
		tag = hire_leader
		hidden_effect = {
			legendary_gts_leader_hire_effect = yes
		}
	}
}
#克洛伊招募事件
country_event = {
	id = aom_leader.3
	title = aom_leader.3.name
	desc = aom_leader.3.desc
	show_sound = event_celebration
	is_triggered_only = yes
	fire_only_once = yes
	picture = Chloe
	event_window_type = leader_recruit
	immediate = {
		set_country_flag = Chloe
		legendary_gts_leader_creator = {
			LEADER_PORTRAIT = Chloe
			CLASS = commander
			NAME = NAME_Chloe
			LEVEL = 8
			AGE = 11
			GENDER = female		
			ETHIC = xenophile
			DESC = Chloe_desc
			CATCH_PHRASE = Chloe_catch_phrase
			RANDOMIZE_TRAITS = no
			TARGET = Chloe
		}
		last_created_leader = {
			add_trait = {
				trait = leader_trait_servant1
			}
			set_leader_flag = leader_Chloe_flag
			save_global_event_target_as = Chloe
		}
	}
	picture_event_data = {
		portrait = event_target:Chloe
		room = ethic_spaceship_room
	}
	option = {
		name = DISMISS
		tag = dismiss_leader
	}
	option = {
		name = aom_leader.3.a
		response_text = aom_leader.3.a.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.b
		response_text = aom_leader.3.b.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.c
		response_text = aom_leader.3.c.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.d
		response_text = aom_leader.3.d.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.e
		response_text = aom_leader.3.e.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.f
		response_text = aom_leader.3.f.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.g
		response_text = aom_leader.3.g.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.3.h
		tag = hire_leader
		hidden_effect = {
			legendary_gts_leader_hire_effect = yes
		}
	}
}
#阿尔托莉雅招募事件
country_event = {
	id = aom_leader.4
	title = aom_leader.4.name
	desc = aom_leader.4.desc
	show_sound = event_celebration
	is_triggered_only = yes
	fire_only_once = yes
	picture = Altria_Pendragon_Franz
	event_window_type = leader_recruit
	immediate = {
		set_country_flag = Altria_Pendragon_Franz
		legendary_gts_leader_creator = {
			LEADER_PORTRAIT = Altria_Pendragon_Franz
			CLASS = commander
			NAME = NAME_Altria_Pendragon_Franz
			LEVEL = 8
			AGE = 11
			GENDER = female		
			ETHIC = xenophile
			DESC = Altria_Pendragon_Franz_desc
			CATCH_PHRASE = Altria_Pendragon_Franz_catch_phrase
			RANDOMIZE_TRAITS = no
			TARGET = Altria_Pendragon_Franz
		}
		last_created_leader = {
			add_trait = {
				trait = leader_trait_servant1
			}
			add_trait = {
				trait = leader_trait_ruler_emperor
			}
			set_leader_flag = leader_Altria_Pendragon_Franz_flag
			save_global_event_target_as = Altria_Pendragon_Franz
		}
	}
	picture_event_data = {
		portrait = event_target:Altria_Pendragon_Franz
		room = ethic_spaceship_room
	}
	option = {
		name = DISMISS
		tag = dismiss_leader
	}
	option = {
		name = aom_leader.4.a
		response_text = aom_leader.4.a.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.b
		response_text = aom_leader.4.b.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.c
		response_text = aom_leader.4.c.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.d
		response_text = aom_leader.4.d.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.e
		response_text = aom_leader.4.e.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.f
		response_text = aom_leader.4.f.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.g
		response_text = aom_leader.4.g.response
		is_dialog_only = yes
	}
	option = {
		name = aom_leader.4.h
		tag = hire_leader
		hidden_effect = {
			legendary_gts_leader_hire_effect = yes
		}
	}
}


country_event = { #Collector followup
	id = aom_leader.1000
	title = "aom_leader.1000.name"
	desc = "aom_leader.1000.desc"

	is_triggered_only = yes

	diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_country.ruler
		room = "ethic_spaceship_room"
	}

	immediate = {
		random_list = {
			90 = {
				set_country_flag = servant_empty
				#custom_tooltip = lootbox_contents_empty
			}	#nothing
			10 = {
				set_country_flag = servant_0
			}
		}
	}

	option = {
		name = Failed
		exclusive_trigger = {
			has_country_flag = servant_empty
		}
		custom_tooltip = lootbox_servant_empty
	}
	option = {
		name = continue
		hidden_effect = {
            country_event = { id = fara.15 }
        }
	}

	option = {
		name = servant_joins
		exclusive_trigger = {
			NOT = { has_country_flag = servant_empty }
		}
		switch = {
			trigger = has_country_flag
			servant_0 = {
				country_event = { id = aom_leader.1001 }
			}

		}

	}

	after = {
		hidden_effect = {
			remove_country_flag = servant_0
			remove_country_flag = servant_empty
		}
	}

}
country_event = { #Collector followup
	id = aom_leader.1001
	title = "aom_leader.1001.name"
	desc = "aom_leader.1001.desc"
	picture = GFX_evt_aom_servant_joins

	is_triggered_only = yes

	immediate = {
		random_list = {
			35 = {
				set_country_flag = servant_1
			}
			35 = {
				set_country_flag = servant_2
			}
			30 = {
				set_country_flag = servant_3
			}
		}
	}

	option = {
		name = marvelous
		exclusive_trigger = {
			NOT = { has_country_flag = collector_empty }
		}
		switch = {
			trigger = has_country_flag
			servant_1 = {
				if = {
					limit = {
						owner = {
							NOR = { 
								has_country_flag = Miyu
							}
						}	
					}
					country_event = { id = aom_leader.2 }
				}
				else = { 
					limit = {
						has_country_flag = Miyu
					}
					country_event = { id = aom_leader.100 }
				}
			}
			servant_2 = {
				if = { 
					limit = {
						owner = {
							NOR = { 
								has_country_flag = Chloe
							}
						}	
					}
					country_event = { id = aom_leader.3 }
				}
				else = {
					limit = {
						has_country_flag = Chloe
					}
					country_event = { id = aom_leader.101 }
				}
			}
			servant_3 = {
				if = { 
					limit = {
						owner = {
							NOR = { 
								has_country_flag = Altria_Pendragon_Franz
							}
						}	
					}
					country_event = { id = aom_leader.4 }	
				}
				else = {
					limit = {
						has_country_flag = Altria_Pendragon_Franz	
					}
					country_event = { id = aom_leader.102 }	
				}
			}

		}

	}

	after = {
		hidden_effect = {
			remove_country_flag = servant_1
			remove_country_flag = servant_2
			remove_country_flag = servant_3
		}
	}

}
#美游宝具等级提升事件
country_event = {
	id = aom_leader.100
	title = "aom_leader.100.name"
	desc = "aom_leader.100.desc"
	show_sound = event_celebration
	is_triggered_only = yes
	picture = Miyu
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:Miyu
		room = ethic_spaceship_room
	}
	immediate = {
		every_owned_leader = {
			if = { 
				limit = { 
					has_leader_flag = leader_Miyu_flag 
					has_trait = leader_trait_servant4 
				}
				add_trait = {
				trait = leader_trait_servant5
			}
				remove_trait = leader_trait_servant4
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Miyu_flag 
					has_trait = leader_trait_servant3 
				}
				add_trait = {
				trait = leader_trait_servant4
			}
				remove_trait = leader_trait_servant3
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Miyu_flag 
					has_trait = leader_trait_servant2 
				}
				add_trait = {
				trait = leader_trait_servant3
			}
				remove_trait = leader_trait_servant2
			}
		   else = {
				limit = { 
					has_leader_flag = leader_Miyu_flag 
					has_trait = leader_trait_servant1 
				}
				add_trait = {
				trait = leader_trait_servant2
			}
				remove_trait = leader_trait_servant1
		    }
		}
	}	
	option = {
		name = aom_leader.100.a
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.100.b
		allow = {
			any_owned_leader = {
				AND= {
				has_leader_flag = leader_Miyu_flag
				has_trait = leader_trait_servant5
			    }
			}
		}
		hidden_effect = {
			set_country_flag = leader_Miyu_flag_max
		}
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.100.c
		allow = {
            has_country_flag = leader_Miyu_flag_max
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = 1
        }
		custom_tooltip = aom_leader.100.c.tooltip
	}
}
#克洛伊宝具等级提升事件
country_event = {
	id = aom_leader.101
	title = "aom_leader.101.name"
	desc = "aom_leader.101.desc"
	show_sound = event_celebration
	is_triggered_only = yes
	picture = Chloe
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:Chloe
		room = ethic_spaceship_room
	}
	immediate = {
		every_owned_leader = {
			if = { 
				limit = { 
					has_leader_flag = leader_Chloe_flag
					has_trait = leader_trait_servant4
				}
				add_trait = {
				trait = leader_trait_servant5
			}
				remove_trait = leader_trait_servant4
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Chloe_flag
					has_trait = leader_trait_servant3 
				}
				add_trait = {
				trait = leader_trait_servant4
			}
				remove_trait = leader_trait_servant3
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Chloe_flag
					has_trait = leader_trait_servant2 
				}
				add_trait = {
				trait = leader_trait_servant3
			}
				remove_trait = leader_trait_servant2
			}
		   else = {
				limit = { 
					has_leader_flag = leader_Chloe_flag
					has_trait = leader_trait_servant1 
				}
				add_trait = {
				trait = leader_trait_servant2
			}
				remove_trait = leader_trait_servant1
		    }
		}	
	}	
	option = {
		name = aom_leader.101.a
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.101.b
		allow = {
			any_owned_leader = {
				AND= {
				has_leader_flag = leader_Chloe_flag
				has_trait = leader_trait_servant5
			    }
			}
		}
		hidden_effect = {
			set_country_flag = leader_Chloe_flag_max
		}
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.101.c
		allow = {
            has_country_flag = leader_Chloe_flag_max
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = 1
        }
		custom_tooltip = aom_leader.101.c.tooltip
	}
}
#阿尔托莉雅宝具等级提升事件
country_event = {
	id = aom_leader.102
	title = "aom_leader.102.name"
	desc = "aom_leader.102.desc"
	show_sound = event_celebration
	is_triggered_only = yes
	picture = Altria_Pendragon_Franz
	diplomatic = yes

	picture_event_data = {
		portrait = event_target:Altria_Pendragon_Franz
		room = ethic_spaceship_room
	}
	immediate = {
		every_owned_leader = {
			if = { 
				limit = { 
					has_leader_flag = leader_Altria_Pendragon_Franz_flag 
					has_trait = leader_trait_servant4 
				}
				add_trait = {
				trait = leader_trait_servant5
			}
				remove_trait = leader_trait_servant4
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Altria_Pendragon_Franz_flag 
					has_trait = leader_trait_servant3 
				}
				add_trait = {
				trait = leader_trait_servant4
			}
				remove_trait = leader_trait_servant3
			}
			else_if = { 
				limit = { 
					has_leader_flag = leader_Altria_Pendragon_Franz_flag 
					has_trait = leader_trait_servant2 
				}
				add_trait = {
				trait = leader_trait_servant3
			}
				remove_trait = leader_trait_servant2
			}
		   else = {
				limit = { 
					has_leader_flag = leader_Altria_Pendragon_Franz_flag
					has_trait = leader_trait_servant1 
				}
				add_trait = {
				trait = leader_trait_servant2
			}
				remove_trait = leader_trait_servant1
		    }
		}	
	}	
	option = {
		name = aom_leader.102.a
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.102.b
		allow = {
			any_owned_leader = {
				AND= {
				has_leader_flag = leader_Altria_Pendragon_Franz_flag
				has_trait = leader_trait_servant5
			    }
			}
		}
		hidden_effect = {
			set_country_flag = lleader_Altria_Pendragon_Franz_flag_max
		}
	}
	option = {
		custom_gui = "enclave_caravaneer_option"
		name = aom_leader.101.c
		allow = {
            has_country_flag = lleader_Altria_Pendragon_Franz_flag_max
		}
		add_resource = {
			sr_aom_unregistered_spirit_origin = 1
        }
		custom_tooltip = aom_leader.101.c.tooltip
	}
}