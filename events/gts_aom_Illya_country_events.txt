namespace = illya

# 红宝石考古
country_event = {
	id = illya.1
	title = illya.1.name
	desc = illya.1.desc
	picture = GFX_event_illya_a_1

	is_triggered_only = yes

    option = { 
		name = illya.1.a
        random_owned_planet = {
			create_archaeological_site = aom_Ruby_digsite
			add_deposit = d_caldea
		}    
    }
}
event = {
	id = illya.2
	title = illya.2.name
	desc = illya.2.desc
	picture = GFX_event_illya_a_2

	is_triggered_only = yes

	option = {
		name = illya.2.a
	}
}
event = {
	id = illya.3
	title = illya.3.name
	desc = illya.3.desc
	picture = GFX_event_illya_a_3

	is_triggered_only = yes

	option = {
		name = illya.3.a
	}
}
event = {
	id = illya.4
	title = illya.4.name
	desc = illya.4.desc
	picture = GFX_event_illya_a_3

	is_triggered_only = yes

	option = {
		name = illya.4.a
	}
}
event = {
	id = illya.5
	title = illya.5.name
	desc = illya.5.desc
	picture = GFX_event_illya_a_3

	is_triggered_only = yes

	option = {
		name = illya.5.a
		add_relic = r_Ruby
		hidden_effect = {
            country_event = { id = illya.6 }
        }
	}
}
country_event = {
	id = illya.6
	title = illya.6.name
	desc = illya.6.desc
    diplomatic = yes

	picture_event_data = {
		portrait = GFX_Ruby
		room = root
	}

	is_triggered_only = yes

    option = { 
		name = illya.6.a
        hidden_effect = {
            country_event = { id = illya.7 }
        }
    }
}
country_event = {
	id = illya.7
	title = illya.7.name
	desc = illya.7.desc
    diplomatic = yes

	picture_event_data = {
		portrait = GFX_Ruby
		room = root
	}

	is_triggered_only = yes

    option = { 
		name = illya.7.a
        hidden_effect = {
            country_event = { id = illya.8 }
        }
    }
}
country_event = {
	id = illya.8
	title = illya.8.name
	desc = illya.8.desc
    diplomatic = yes

	picture_event_data = {
		portrait = GFX_Ruby
		room = root
	}

	is_triggered_only = yes

    option = { 
		name = illya.8.a
        hidden_effect = {
            country_event = { id = illya.9 }
        }
    }
}
country_event = {
	id = illya.9
	title = illya.9.name
	desc = illya.9.desc
    diplomatic = yes

	picture_event_data = {
		portrait = GFX_Ruby
		room = root
	}

	is_triggered_only = yes

    option = { 
		name = illya.9.a
        hidden_effect = {
            country_event = { id = illya.10 }
        }
    }
}
country_event = {
	id = illya.10
	title = illya.10.name
	desc = illya.10.desc
    diplomatic = yes

	picture_event_data = {
		portrait = GFX_Ruby
		room = root
	}

	is_triggered_only = yes

    option = { 
		name = illya.10.a
		response_text = illya.10.a.response

        hidden_effect = {
            country_event = { id = illya.1000 }
			planet_event = { id = illya.11 }
        }
		tooltip = {
			begin_event_chain = {
				event_chain = "illya"
				target = ROOT
			}
		}
    }
}

country_event = {
	id = illya.1000
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	event_chain = illya
	trigger = {
		NOT = { has_global_flag = primitive_illya_sol_has_created }
	}	

	immediate = {
		set_global_flag = primitive_illya_sol_has_created
		capital_scope = {
			spawn_system = {
				min_distance = 10
				max_distance = 30
				max_jumps = 0
				hyperlane = yes
				is_discovered = no
				initializer = "primitive_illya_sol"
			}
		}
	}
}

country_event = {
	id = illya.1001
	title = illya.1001.name
	desc = illya.1001.desc
	picture = GFX_event_illya_b_1

	fire_only_once = yes
	event_chain = illya
	is_triggered_only = yes
	
	option = { 
		name = illya.1001.a
        hidden_effect = {
            country_event = { id = illya.1002 }
        }
    }
}

country_event = {
	id = illya.1002
	title = illya.1002.name
	desc = illya.1002.desc
    picture = GFX_event_illya_b_2

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1002.a
        hidden_effect = {
            country_event = { id = illya.1003 }
        }
    }
}
country_event = {
	id = illya.1003
	title = illya.1003.name
	desc = illya.1003.desc
    picture = GFX_event_illya_b_3

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1003.a
        hidden_effect = {
            country_event = { id = illya.1004 }
        }
    }
}
country_event = {
	id = illya.1004
	title = illya.1004.name
	desc = illya.1004.desc
    picture = GFX_event_illya_b_4

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1004.a
        hidden_effect = {
            country_event = { id = illya.1025 }
        }
    }
}
country_event = {
	id = illya.1025
	diplomatic = yes
	event_chain = illya
	is_triggered_only = yes
	title = "illya.1025.name"
	desc = {
		text = "illya.1025.desc"
	}

	picture_event_data = {
		portrait = Illya
		room = "ethic_spaceship_room"
	}
    option = { 
		name = illya.1025.a
        hidden_effect = {
            country_event = { id = illya.1026 }
        }
    }
}
country_event = {
	id = illya.1026
	title = illya.1026.name
	desc = illya.1026.desc
    diplomatic = yes
	event_chain = illya
	is_triggered_only = yes
	title = "illya.1026.name"
	desc = {
		text = "illya.1026.desc"
	}

	picture_event_data = {
		portrait = Illya1
		room = "ethic_spaceship_room"
	}
    option = { 
		name = illya.1026.a
        hidden_effect = {
            country_event = { id = illya.1027 }
        }
    }
}
country_event = {
	id = illya.1027
    diplomatic = yes
	event_chain = illya
	is_triggered_only = yes
	title = "illya.1027.name"
	desc = {
		text = "illya.1027.desc"
	}

	picture_event_data = {
		portrait = Illya
		room = "ethic_spaceship_room"
	}
    option = { 
		name = illya.1027.a
        hidden_effect = {
            country_event = { id = illya.1020 }
        }
    }
}
country_event = {
	id = illya.1020
	title = illya.1020.name
	desc = illya.1020.desc
    diplomatic = yes
	event_chain = illya
	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:fara_country.ruler
		room = root
	}
	
    option = { 
		name = illya.1005.a
        hidden_effect = {
            country_event = { id = illya.1005 }
        }
    }
}
country_event = {
	id = illya.1005
	title = illya.1005.name
	desc = illya.1005.desc
    picture = GFX_event_illya_b_5

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1005.a

        hidden_effect = {
            country_event = { id = illya.1006}
        }
    }
}

country_event = {
	id = illya.1006
	title = illya.1006.name
	desc = illya.1006.desc
    picture = GFX_event_illya_b_6

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1006.a
        hidden_effect = {
            country_event = { id = illya.1007 }
        }
    }
}
country_event = {
	id = illya.1007
	title = illya.1007.name
	desc = illya.1007.desc
    picture = GFX_event_illya_b_7

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1007.a
        hidden_effect = {
            country_event = { id = illya.1008 }
        }
    }
}
country_event = {
	id = illya.1008
	title = illya.1008.name
	desc = illya.1008.desc
    picture = GFX_event_illya_b_8

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1008.a
        hidden_effect = {
            country_event = { id = illya.1009 }
        }
    }
}
country_event = {
	id = illya.1009
	title = illya.1009.name
	desc = illya.1009.desc
    picture = GFX_event_illya_b_9

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1009.a
        hidden_effect = {
            country_event = { id = illya.1010 }
        }
    }
}
country_event = {
	id = illya.1010
	title = illya.1010.name
	desc = illya.1010.desc
    picture = GFX_event_illya_b_10

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1010.a
        hidden_effect = {
            country_event = { id = illya.1011 }
        }
    }
}
country_event = {
	id = illya.1011
	title = illya.1011.name
	desc = illya.1011.desc
    picture = GFX_event_illya_b_11

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1011.a
        hidden_effect = {
            country_event = { id = illya.1012 }
        }
    }
}
country_event = {
	id = illya.1012
	title = illya.1012.name
	desc = illya.1012.desc
    picture = GFX_event_illya_b_12

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1012.a
        hidden_effect = {
            country_event = { id = illya.1013 }
        }
    }
}
country_event = {
	id = illya.1013
	title = illya.1013.name
	desc = illya.1013.desc
    picture = GFX_event_illya_b_13

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1013.a
        hidden_effect = {
            country_event = { id = illya.1014 }
        }
    }
}
country_event = {
	id = illya.1014
	title = illya.1014.name
	desc = illya.1014.desc
    picture = GFX_event_illya_b_14

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1014.a
        hidden_effect = {
            country_event = { id = illya.1015 }
        }
    }
}

country_event = {
	id = illya.1015
	title = illya.1014.name
	desc = illya.1014.desc
    picture = GFX_event_illya_b_15

	event_chain = illya
	is_triggered_only = yes

    option = { 
		name = illya.1015.a

        hidden_effect = {
            country_event = { id = illya.1016 }
			country_event = { id = illya.1017 }
			country_event = { id = illya.1018 }
        }
		end_event_chain = "illya"
    }
}

event = {
	id = illya.1016
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_country = {
			name = "NAME_fara_illya"
			type = fara_illya_country
			flag = {
				icon= {
					category = "aom"
					file = "fara_flag.dds"
				}
				background= {
					category = "backgrounds"
					file = "sinus.dds"
				}
				colors={
					"grey"
					"dark_grey"
					"null"
					"null"
				}
			}
		}
		last_created_country = {
			create_leader = {
				class = governor
				species = owner_main_species
				name = NAME_fara_illya
				event_leader = yes
				skill = 10
				set_age = 0
				traits = {
					trait = subclass_governor_economist
					trait = leader_trait_urbanist_3
					trait = leader_trait_scrapper_2
				}
			}
			set_leader = last_created_leader
			last_created_leader = {
				change_leader_portrait = fara_illya
			}
			save_global_event_target_as = fara_illya_country
		}
	}
}
event = {
	id = illya.1017
	hide_window = yes
	is_triggered_only = yes

	immediate = {
		create_country = {
			name = "NAME_illya"
			type = illya_country
			flag = {
				icon= {
					category = "aom"
					file = "illya_flag.dds"
				}
				background= {
					category = "backgrounds"
					file = "sinus.dds"
				}
				colors={
					"grey"
					"dark_grey"
					"null"
					"null"
				}
			}
		}
		last_created_country = {
			create_leader = {
				class = governor
				species = owner_main_species
				name = NAME_illya
				event_leader = yes
				skill = 10
				set_age = 0
				traits = {
					trait = subclass_governor_economist
					trait = leader_trait_urbanist_3
					trait = leader_trait_scrapper_2
				}
			}
			set_leader = last_created_leader
			last_created_leader = {
				change_leader_portrait = Illya
			}
			save_global_event_target_as = illya_country
		}
	}
}
#伊莉雅通讯
country_event = {
	id = illya.1018
	is_triggered_only = yes
	diplomatic = yes
	title = "illya.1018.name"
	desc = {
		text = "illya.1018.desc"
	}

	picture_event_data = {
		portrait = Illya
		room = "ethic_spaceship_room"
	}

	trigger = {
		is_ai = no
		has_origin = origin_panlon
	}
	
	immediate = {
		event_target:fara_illya_country = {
			establish_communications_no_message = root
		}
		event_target:illya_country = {
			establish_communications_no_message = root
		}
		set_country_flag = has_illya
	}
	
	option = {
		name = illya.1018.a
		hidden_effect = {
            country_event = { id = aom_illya_leader.1 }
        }
	}
}

# 法拉和伊莉雅起始通讯
country_event = {
	id = illya.2000
	title = illya.2000.name
	desc = illya.2000.desc

	diplomatic = yes
	picture = GFX_evt_mysterious_signal
	picture_event_data = {
		portrait = event_target:fara_illya_country.ruler
		room = root
	}

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = fara_illya_diplomacy_engaged }
	}

	immediate = {
		set_country_flag = fara_illya_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = fara_illya_diplomacy_engaged }
	}

	trigger = {
		from = { is_country_type = fara_illya_country }
		is_ai = no
	}

	option = { #请求
        name = illya.2000.a
        hidden_effect = {
            country_event = {  id = illya.2001 }
        }
    }
	option = {
		name = illya.2000.c
		default_hide_option = yes
	}
}
country_event = {
	id = illya.2001
	title = illya.2001.name
	desc = illya.2001.desc
    diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_illya_country.ruler
		room = root
	}
	
	is_triggered_only = yes

    trigger = {
        OR = {
			has_authority = auth_hales_panlon
        }
        is_ai = no
    }

	picture_event_data = {
		room = senka2_room
	}

    option = { 
        # 踩城市1
        name = illya.2001.a
		hidden_effect = {
            country_event = { id = illya.2002 }
        }
		remove_country_flag = fara_illya_diplomacy_engaged 
    }

    # 返回主选单
    option = { 
        name = fara_illya_return_to_main
        hidden_effect = {
            country_event = { id = illya.2001 }
        }
    }

    # 退出
    option = { 
        name = fara_illya_exit
        default_hide_option = yes
        remove_country_flag = fara_illya_diplomacy_engaged 
    }
}
country_event = {
	id = illya.2002
	title = illya.2002.name
	desc = illya.2002.desc
    diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_illya_country.ruler
		room = root
	}
	
	is_triggered_only = yes

    trigger = {
        OR = {
			has_authority = auth_hales_panlon
        }
        is_ai = no
    }

	picture_event_data = {
		room = senka2_room
	}

    option = { 
        #鞋
        name = illya.2002.a
		hidden_effect = {
            country_event = { id = illya.2003 }
        }
		remove_country_flag = fara_illya_diplomacy_engaged 
    }
	option = { 
        # 袜
        name = illya.2002.b
		hidden_effect = {
            country_event = { id = illya.2005 }
        }
		remove_country_flag = fara_illya_diplomacy_engaged 
    }

    # 返回主选单
    option = { 
        name = fara_illya_return_to_main
        hidden_effect = {
            country_event = { id = illya.2001 }
        }
    }

    # 退出
    option = { 
        name = fara_illyaexit
        default_hide_option = yes
        remove_country_flag = fara_illya_diplomacy_engaged 
    }
}

# 踩城市鞋
country_event = {
	id = illya.2003
	title = illya.2003.name
	desc = illya.2003.desc
    diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_country.ruler
		room = root
	}

	is_triggered_only = yes

    option = { 
        # 踩城市
		name = illya.2003.a
        random_owned_planet = {
			planet_event = { id = illya.2004 }	
		}    
    }
}
planet_event = {
	#踩城市鞋
	id = illya.2004
	title = illya.2004.name
	desc = illya.2004.desc
	picture = GFX_event_fara_illya_city_a_1
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = illya.2004.a
		add_planet_devastation = 10
		owner = {
			add_resource = {
				unity = 1000
			}
		}
		hidden_effect = {
            planet_event = {
				id = illya.2007
				days = 30
				random = 30
			}
        }
	}
}

# 踩城市1袜
country_event = {
	id = illya.2005
	title = illya.2005.name
	desc = illya.2005.desc
    diplomatic = yes

	picture_event_data = {
		portrait = event_target:fara_country.ruler
		room = root
	}

	is_triggered_only = yes

    option = { 
        # 踩城市
		name = illya.2004.a
        random_owned_planet = {
			planet_event = { id = illya.2006 }	
		}    
    }
}
planet_event = {
	#踩城市鞋
	id = illya.2006
	title = illya.2006.name
	desc = illya.2006.desc
	picture = GFX_event_fara_illya_city_a_2
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes
	option = {
		name = illya.2006.a
		add_planet_devastation = 10
		owner = {
			add_resource = {
				unity = 1000
			}
		}
		hidden_effect = {
            planet_event = {
				id = illya.2007
				days = 30
				random = 30
			}
        }
	}
}
planet_event = {
	#踩城市1复原
	id = illya.2007
	title = illya.2007.name
	desc = illya.2007.desc
	picture = GFX_event_fara_illya_city_a_3
	show_sound = event_default
	is_triggered_only = yes
	fire_only_once = yes

	option = {
		name = illya.2007.a
		add_planet_devastation = -10
		owner = {
			add_resource = {
				unity = 1000
			}
		}
	}
}
#伊莉雅起始通讯
country_event = {
	id = illya.3000
	title = illya.3000.name
	desc = illya.3000.desc

	diplomatic = yes
	picture = GFX_evt_mysterious_signal
	picture_event_data = {
		portrait = event_target:illya_country.ruler
		room = root
	}

	is_triggered_only = yes

	trigger = {
		NOT = { has_country_flag = illya_diplomacy_engaged }
	}

	immediate = {
		set_country_flag = illya_diplomacy_engaged
	}

	after = {
		hidden_effect = { remove_country_flag = illya_diplomacy_engaged }
	}

	trigger = {
		from = { is_country_type = illya_country }
		is_ai = no
	}

	option = { #我们需要您的力量
        name = illya.3000.a
		allow = {
			NOR = {
			    has_country_flag = Illya_warship_active
			    has_country_flag = Illya_school_warship_active 
			}	
		}
        hidden_effect = {
            country_event = {  id = illya.3001 }
        }
    }
	option = { #切换灵基
        name = illya.3000.b
		allow = {
			OR = {
			    has_country_flag = Illya_warship_active
			    has_country_flag = Illya_school_warship_active
			}	
		}
		hidden_effect = {
			country_event = {  id = illya.3001 }
		}
    }
	option = { #取消战舰
        name = illya.3000.c
		allow = {
			OR = {
			    has_country_flag = Illya_warship_active
			    has_country_flag = Illya_school_warship_active
			}	
		}
		hidden_effect = {
			event_target:Illya_school_warship = { delete_fleet = this }
			event_target:Illya_warship = { delete_fleet = this }
		}
    }
	 # 退出
	 option = { 
        name = illya.3000.d
        remove_country_flag = illya_diplomacy_engaged 
    }
}

country_event = {
	id = illya.3001
	title = illya.3001.name
	desc = illya.3001.desc
    diplomatic = yes

	picture_event_data = {
		portrait = event_target:illya_country.ruler
		room = root
	}
	
	is_triggered_only = yes

    trigger = {
        OR = {
			has_authority = auth_hales_panlon
        }
        is_ai = no
    }

	picture_event_data = {
		room = senka2_room
	}

    option = { 
        # 第一阶段灵基
        name = illya.3001.a
		trigger = {
			NOT = { has_country_flag = Illya_warship_active }
		}
		hidden_effect = {
			create_Illya_warship = yes
		}
		remove_country_flag = illya_diplomacy_engaged 
    }
	option = { 
        # 第二阶段灵基
        name = illya.3001.b
		trigger = {
			NOT = { has_country_flag = Illya_school_warship_active }
		}
		hidden_effect = {
			create_Illya_school_warship = yes
		}
		remove_country_flag = illya_diplomacy_engaged 
    }

    # 返回主选单
    option = { 
        name = illya.3001.c
        hidden_effect = {
            country_event = { id = illya.3001 }
        }
    }

    # 退出
    option = { 
        name = illya.3001.d
        remove_country_flag = illya_diplomacy_engaged 
    }
}